// pipeline {
    
//     agent any
    
//     stages {
//         stage('Git Clone') {
//             steps {
//                 git branch: 'FE/develop', credentialsId: 'gitlab_ID_PW', url: 'http://lab.ssafy.com/s10-fintech-finance-sub2/S10P22D203.git'
//             }
//             post {
//                 failure {
//                     echo 'Repository clone failure !'
//                 }
//                 success {
//                     echo 'Repository clone success !'
//                 }
//             }
//         }
        
//         stage('Build') {
//             steps {
//                 dir("./finfarm-frontend") {
//                     nodejs(nodeJSInstallationName: 'NodeJS 16.14.0') {
//                         sh 'CI=false yarn install && CI=sudo chmod +x node_modules/.bin/react-scripts'
//                         sh 'CI=false yarn run build'
//                     }
//                 }
//             }
//         }
        
//         stage('Compression') {
//             steps {
//                 dir("./finfarm-frontend") {
//                     sh '''
//                     rm -rf node_modules
//                     tar -cvf front_0.1.0.tar .
//                     '''
//                 }
//             }
//         }
        
//         stage('Deploy') {
//             steps {
//                 sshagent(credentials: ['my-ssh-credentials']) {
//                     withCredentials([string(credentialsId: 'EC2_SERVER_IP', variable: 'IP')]) {
//                         sh '''
//                             ssh -o StrictHostKeyChecking=no ubuntu@$IP
//                             scp /var/jenkins_home/workspace/front/front/front_0.1.0.tar ubuntu@$IP:/home/ubuntu/Frontend
//                             ssh -t ubuntu@$IP ./deploy_fe.sh
//                         '''
//                     }
//                 }
//                 timeout(time: 30, unit: 'SECONDS') {
//                 }
//             }
//         }
//     }
// }